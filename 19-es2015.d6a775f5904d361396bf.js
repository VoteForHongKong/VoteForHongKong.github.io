(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{WsNE:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FunctionalConstituencyPageModule",(function(){return functional_constituency_module_FunctionalConstituencyPageModule}));var common=__webpack_require__("ofXK"),fesm2015_forms=__webpack_require__("3Pt+"),ionic_angular=__webpack_require__("TEn/"),router=__webpack_require__("tyNb"),tslib_es6=__webpack_require__("mrSG"),voting_service=__webpack_require__("JnHU"),core=__webpack_require__("fXoL"),util_service=__webpack_require__("2Rin"),ngx_translate_core=__webpack_require__("sYmb"),footer_component=__webpack_require__("LmEr"),header_component=__webpack_require__("2MiI"),options_component=__webpack_require__("gstJ"),vote_component=__webpack_require__("gY5R");function FunctionalConstituencyPage_app_header_0_Template(rf,ctx){1&rf&&(core.Kb(0,"app-header",7),core.Zb(1,"translate")),2&rf&&core.ec("title",core.ac(1,1,"funct.title1"))}function FunctionalConstituencyPage_app_header_1_Template(rf,ctx){1&rf&&(core.Kb(0,"app-header",7),core.Zb(1,"translate")),2&rf&&core.ec("title",core.ac(1,1,"funct.title2"))}function FunctionalConstituencyPage_div_8_Template(rf,ctx){if(1&rf){const _r5=core.Nb();core.Mb(0,"div"),core.Mb(1,"app-options",8),core.Ub("ngModelChange",(function($event){return core.hc(_r5),core.Yb().constituency=$event}))("votesChange",(function(){return core.hc(_r5),core.Yb().voteChange()})),core.Lb(),core.Lb()}if(2&rf){const ctx_r2=core.Yb();core.zb(1),core.ec("options",ctx_r2.constituencies)("ngModel",ctx_r2.constituency)("lang",ctx_r2.trans.currentLang)}}function FunctionalConstituencyPage_div_9_Template(rf,ctx){if(1&rf){const _r8=core.Nb();core.Mb(0,"div"),core.Mb(1,"ion-row"),core.Mb(2,"ion-col",9),core.Mb(3,"h3",10),core.mc(4),core.Lb(),core.Mb(5,"app-vote",11),core.Ub("ngModelChange",(function($event){return core.hc(_r8),core.Yb().electeds=$event})),core.Lb(),core.Lb(),core.Lb(),core.Lb()}if(2&rf){const ctx_r3=core.Yb();core.zb(4),core.nc(ctx_r3.constituency[ctx_r3.trans.currentLang]),core.zb(1),core.ec("candidates",ctx_r3.candidates)("ngModel",ctx_r3.electeds)("num",ctx_r3.num)}}const routes=[{path:"",component:(()=>{class FunctionalConstituencyPage{constructor(nav,voting,util,trans){this.nav=nav,this.voting=voting,this.util=util,this.trans=trans,this.constituencies=[],this.candidates=[],this.electeds=[],this.num=1,this.step=0}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const{manifest:manifest}=this.util.validation(this.nav,!1,!0);this.polling=manifest.polling,this.constituencies=this.voting.findPollingsByType(voting_service.a.FCY,this.polling.districts),0===this.constituencies.length?(this.util.notice("errors.manifest.constituenciesless"),this.util.reset(this.nav)):1===this.constituencies.length&&(this.constituency=this.constituencies[0],this.next())}))}ngAfterViewInit(){this.util.checkVotes(this.nav,1)}next(){this.validate1()&&(this.candidates=this.voting.findCansByDis(this.constituency.id,this.polling.candidates),0===this.candidates.length?(this.util.notice("errors.manifest.candidatesless"),this.util.reset(this.nav)):this.step++)}confirm(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(this.validate2()){const prompt=yield this.util.voteConfirm("funct.title2");yield prompt.present(),prompt.onDidDismiss().then(res=>{res&&"confirm"===res.role&&(this.voting.packVotes(this.electeds,this.constituency),this.nav.navigateRoot("gen-qrcode"))})}}))}validate1(){return null!=this.constituency}validate2(){return this.electeds.length===this.num}voteChange(){this.content.scrollToTop(500)}}return FunctionalConstituencyPage.ɵfac=function(t){return new(t||FunctionalConstituencyPage)(core.Jb(ionic_angular.x),core.Jb(voting_service.b),core.Jb(util_service.a),core.Jb(ngx_translate_core.d))},FunctionalConstituencyPage.ɵcmp=core.Db({type:FunctionalConstituencyPage,selectors:[["app-functional-constituency"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.qc(ionic_angular.i,!0),2&rf&&core.gc(_t=core.Vb())&&(ctx.content=_t.first)},decls:12,vars:8,consts:[[3,"title",4,"ngIf"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[4,"ngIf"],[3,"main","mainDisabled","mainClick"],[3,"title"],[3,"options","ngModel","lang","ngModelChange","votesChange"],[1,"content","ion-text-center"],[1,"sub-title","bottom-line"],[3,"candidates","ngModel","num","ngModelChange"]],template:function(rf,ctx){1&rf&&(core.lc(0,FunctionalConstituencyPage_app_header_0_Template,2,3,"app-header",0),core.lc(1,FunctionalConstituencyPage_app_header_1_Template,2,3,"app-header",0),core.Mb(2,"ion-content",1),core.Mb(3,"div",2),core.Kb(4,"div",3),core.Lb(),core.Mb(5,"div",4),core.Kb(6,"div",3),core.Lb(),core.Kb(7,"br"),core.lc(8,FunctionalConstituencyPage_div_8_Template,2,3,"div",5),core.lc(9,FunctionalConstituencyPage_div_9_Template,6,4,"div",5),core.Lb(),core.Mb(10,"app-footer",6),core.Ub("mainClick",(function(){return 0===ctx.step?ctx.next():ctx.confirm()})),core.Zb(11,"translate"),core.Lb()),2&rf&&(core.ec("ngIf",0===ctx.step),core.zb(1),core.ec("ngIf",1===ctx.step),core.zb(7),core.ec("ngIf",0===ctx.step),core.zb(1),core.ec("ngIf",1===ctx.step),core.zb(1),core.ec("main",core.ac(11,6,0===ctx.step?"common.next":"common.confirm"))("mainDisabled",0===ctx.step?null==ctx.constituency:ctx.electeds.length!==ctx.num))},directives:[common.j,ionic_angular.i,footer_component.a,header_component.a,options_component.a,fesm2015_forms.c,fesm2015_forms.d,ionic_angular.p,ionic_angular.h,vote_component.a],pipes:[ngx_translate_core.c],styles:[""]}),FunctionalConstituencyPage})()}];let functional_constituency_routing_module_FunctionalConstituencyPageRoutingModule=(()=>{class FunctionalConstituencyPageRoutingModule{}return FunctionalConstituencyPageRoutingModule.ɵmod=core.Hb({type:FunctionalConstituencyPageRoutingModule}),FunctionalConstituencyPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||FunctionalConstituencyPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),FunctionalConstituencyPageRoutingModule})();var components_module=__webpack_require__("j1ZV");let functional_constituency_module_FunctionalConstituencyPageModule=(()=>{class FunctionalConstituencyPageModule{}return FunctionalConstituencyPageModule.ɵmod=core.Hb({type:FunctionalConstituencyPageModule}),FunctionalConstituencyPageModule.ɵinj=core.Gb({factory:function(t){return new(t||FunctionalConstituencyPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.u,ngx_translate_core.b,components_module.a,functional_constituency_routing_module_FunctionalConstituencyPageRoutingModule]]}),FunctionalConstituencyPageModule})()}}]);