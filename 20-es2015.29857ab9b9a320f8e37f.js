(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{pRd8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GenQRCodePageModule",(function(){return gen_qrcode_module_GenQRCodePageModule}));var common=__webpack_require__("ofXK"),fesm2015_forms=__webpack_require__("3Pt+"),ionic_angular=__webpack_require__("TEn/"),router=__webpack_require__("tyNb"),tslib_es6=__webpack_require__("mrSG"),voting_service=__webpack_require__("JnHU"),core=__webpack_require__("fXoL"),util_service=__webpack_require__("2Rin"),ngx_translate_core=__webpack_require__("sYmb"),header_component=__webpack_require__("2MiI"),reminder_component=__webpack_require__("TYHv"),footer_component=__webpack_require__("LmEr");function GenQRCodePage_div_9_ion_row_1_p_2_Template(rf,ctx){if(1&rf&&(core.Mb(0,"p",14),core.mc(1),core.Lb()),2&rf){const vote_r1=core.Yb(2).$implicit,ctx_r3=core.Yb();core.zb(1),core.nc(vote_r1.info.polling.type[ctx_r3.trans.currentLang])}}function GenQRCodePage_div_9_ion_row_1_h1_3_Template(rf,ctx){if(1&rf&&(core.Mb(0,"h1",17),core.mc(1),core.Lb()),2&rf){const vote_r1=core.Yb(2).$implicit,ctx_r4=core.Yb();core.zb(1),core.nc(vote_r1.info.polling[ctx_r4.trans.currentLang])}}function GenQRCodePage_div_9_ion_row_1_ion_avatar_5_Template(rf,ctx){if(1&rf){const _r11=core.Nb();core.Mb(0,"ion-avatar",18),core.Mb(1,"img",19),core.Ub("error",(function(){core.hc(_r11);const vote_r1=core.Yb(2).$implicit;return core.Yb().errorImageProfile(vote_r1.info.id)})),core.Lb(),core.Lb()}if(2&rf){const vote_r1=core.Yb(2).$implicit;core.zb(1),core.ec("src",vote_r1.info.avatar,core.jc)}}function GenQRCodePage_div_9_ion_row_1_img_11_Template(rf,ctx){if(1&rf){const _r15=core.Nb();core.Mb(0,"img",20),core.Ub("error",(function(){core.hc(_r15);const vote_r1=core.Yb(2).$implicit;return core.Yb().errorImage(vote_r1.info.id)})),core.Lb()}if(2&rf){const vote_r1=core.Yb(2).$implicit;core.ec("src",vote_r1.info.party.avatar,core.jc)}}function GenQRCodePage_div_9_ion_row_1_Template(rf,ctx){if(1&rf&&(core.Mb(0,"ion-row"),core.Mb(1,"ion-col"),core.lc(2,GenQRCodePage_div_9_ion_row_1_p_2_Template,2,1,"p",9),core.lc(3,GenQRCodePage_div_9_ion_row_1_h1_3_Template,2,1,"h1",10),core.Mb(4,"ion-item",11),core.lc(5,GenQRCodePage_div_9_ion_row_1_ion_avatar_5_Template,2,1,"ion-avatar",12),core.Mb(6,"ion-label",13),core.Mb(7,"h1",14),core.Mb(8,"b"),core.mc(9),core.Lb(),core.Lb(),core.Mb(10,"p",14),core.lc(11,GenQRCodePage_div_9_ion_row_1_img_11_Template,1,1,"img",15),core.Mb(12,"span",16),core.mc(13),core.Lb(),core.Lb(),core.Lb(),core.Kb(14,"br"),core.Lb(),core.Lb(),core.Lb()),2&rf){const vote_r1=core.Yb().$implicit,ctx_r2=core.Yb();core.zb(2),core.ec("ngIf",vote_r1.info.polling),core.zb(1),core.ec("ngIf",vote_r1.info.polling),core.zb(2),core.ec("ngIf",vote_r1.info.avatar),core.zb(4),core.nc(vote_r1.info.name[ctx_r2.trans.currentLang]),core.zb(2),core.ec("ngIf",vote_r1.info.party.avatar),core.zb(2),core.nc(vote_r1.info.party[ctx_r2.trans.currentLang])}}function GenQRCodePage_div_9_Template(rf,ctx){if(1&rf&&(core.Mb(0,"div"),core.lc(1,GenQRCodePage_div_9_ion_row_1_Template,15,6,"ion-row",8),core.Lb()),2&rf){const vote_r1=ctx.$implicit;core.zb(1),core.ec("ngIf",vote_r1.info&&vote_r1.info.name&&vote_r1.info.party&&vote_r1.info.polling&&"10000"!=vote_r1.info.polling.id)}}const routes=[{path:"",component:(()=>{class GenQRCodePage{constructor(nav,voting,util,trans){this.nav=nav,this.voting=voting,this.util=util,this.trans=trans,this.loading=!1,this.votes=[],this.isSUP=!1}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const{manifest:manifest}=this.util.validation(this.nav,!1,!0);this.isSUP=this.voting.isSUP(),this.votes=yield this.voting.cacheVotesGet(),this.votes.map(vote=>{vote.info.polling.type=this.voting.findTypeById(vote.info.polling.type,manifest.polling.types),vote.info.avatar="assets/imgs/candidates/"+vote.info.id+".jpg",vote.info.party.avatar="assets/imgs/parties/"+vote.info.party.id+".png"})}))}genQRCode(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){let QRcode;this.loading=!0,setTimeout(()=>Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.genQRcode().then(res=>{QRcode=res}).catch(err=>{switch(String(err).slice(7)){case"INVALID_STATION_DEVICE":this.util.notice("errors.invalid","station.station");break;case"NOT_SUPPORT_BALLOT":this.util.notice("errors.vote.support","common.device");break;default:this.util.notice("errors.failed","common.genQR")}}).finally(()=>{this.loading=!1,null!=QRcode&&""!==QRcode&&this.nav.navigateRoot("identify",{queryParams:{QRcode:QRcode}})})})),100)}))}genQRcode(){return new Promise((resolve,reject)=>Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{if(this.isSUP&&!this.voting.cacheVoteSUPGet()){const{device:device,manifest:manifest}=this.util.validation(this.nav),pollings=this.voting.mapping(voting_service.a.SUP,device,manifest.polling);this.voting.packVotes([{id:"9999",name:null,party:null,district:null,platform:null}],pollings.districts[0])}const QRcode=yield this.voting.genQRcode();resolve(QRcode)}catch(err){reject(err)}})))}errorImage(id){this.votes.map(vote=>{vote.info.id===id&&(vote.info.party.avatar=null)})}errorImageProfile(id){this.votes.map(vote=>{vote.info.id===id&&(vote.info.avatar=null)})}}return GenQRCodePage.ɵfac=function(t){return new(t||GenQRCodePage)(core.Jb(ionic_angular.x),core.Jb(voting_service.b),core.Jb(util_service.a),core.Jb(ngx_translate_core.d))},GenQRCodePage.ɵcmp=core.Db({type:GenQRCodePage,selectors:[["app-gen-qrcode"]],decls:14,vars:14,consts:[[3,"title","content"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[4,"ngFor","ngForOf"],[3,"reminder"],[3,"main","loading","mainClick"],[4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["class","sub-title ion-text-wrap",4,"ngIf"],[1,"ballot"],["class","profile",4,"ngIf"],[1,"party"],[1,"ion-text-wrap"],["class","party-avatar",3,"src","error",4,"ngIf"],[1,"verical-middle"],[1,"sub-title","ion-text-wrap"],[1,"profile"],[3,"src","error"],[1,"party-avatar",3,"src","error"]],template:function(rf,ctx){1&rf&&(core.Kb(0,"app-header",0),core.Zb(1,"translate"),core.Zb(2,"translate"),core.Mb(3,"ion-content",1),core.Mb(4,"div",2),core.Kb(5,"div",3),core.Lb(),core.Mb(6,"div",4),core.Kb(7,"div",3),core.Lb(),core.Kb(8,"br"),core.lc(9,GenQRCodePage_div_9_Template,2,1,"div",5),core.Kb(10,"app-reminder",6),core.Zb(11,"translate"),core.Lb(),core.Mb(12,"app-footer",7),core.Ub("mainClick",(function(){return ctx.genQRCode()})),core.Zb(13,"translate"),core.Lb()),2&rf&&(core.ec("title",core.ac(1,6,"genQR.title"))("content",core.ac(2,8,"genQR.content")),core.zb(9),core.ec("ngForOf",ctx.votes),core.zb(1),core.ec("reminder",core.ac(11,10,"common.reminders.complete")),core.zb(2),core.ec("main",core.ac(13,12,"common.genQR"))("loading",ctx.loading))},directives:[header_component.a,ionic_angular.i,common.i,reminder_component.a,footer_component.a,common.j,ionic_angular.p,ionic_angular.h,ionic_angular.m,ionic_angular.n,ionic_angular.d],pipes:[ngx_translate_core.c],styles:[".ballot[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:58px;height:58px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{margin-left:12px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]   .party-avatar[_ngcontent-%COMP%]{width:28px;height:28px;vertical-align:middle;border-radius:50%}"]}),GenQRCodePage})()}];let gen_qrcode_routing_module_GenQRCodePageRoutingModule=(()=>{class GenQRCodePageRoutingModule{}return GenQRCodePageRoutingModule.ɵmod=core.Hb({type:GenQRCodePageRoutingModule}),GenQRCodePageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||GenQRCodePageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),GenQRCodePageRoutingModule})();var components_module=__webpack_require__("j1ZV");let gen_qrcode_module_GenQRCodePageModule=(()=>{class GenQRCodePageModule{}return GenQRCodePageModule.ɵmod=core.Hb({type:GenQRCodePageModule}),GenQRCodePageModule.ɵinj=core.Gb({factory:function(t){return new(t||GenQRCodePageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.u,ngx_translate_core.b,components_module.a,gen_qrcode_routing_module_GenQRCodePageRoutingModule]]}),GenQRCodePageModule})()}}]);