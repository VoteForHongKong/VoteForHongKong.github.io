function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{pRd8:function(n,t,e){"use strict";e.r(t),e.d(t,"GenQRCodePageModule",(function(){return I}));var i=e("ofXK"),r=e("3Pt+"),a=e("TEn/"),o=e("tyNb"),c=e("mrSG"),s=e("JnHU"),l=e("fXoL"),f=e("2Rin"),b=e("sYmb"),p=e("2MiI"),u=e("TYHv"),g=e("LmEr");function v(n,t){if(1&n&&(l.Mb(0,"p",14),l.mc(1),l.Lb()),2&n){var e=l.Yb(2).$implicit,i=l.Yb();l.zb(1),l.nc(e.info.polling.type[i.trans.currentLang])}}function d(n,t){if(1&n&&(l.Mb(0,"h1",17),l.mc(1),l.Lb()),2&n){var e=l.Yb(2).$implicit,i=l.Yb();l.zb(1),l.nc(e.info.polling[i.trans.currentLang])}}function m(n,t){if(1&n){var e=l.Nb();l.Mb(0,"ion-avatar",18),l.Mb(1,"img",19),l.Ub("error",(function(){l.hc(e);var n=l.Yb(2).$implicit;return l.Yb().errorImageProfile(n.info.id)})),l.Lb(),l.Lb()}if(2&n){var i=l.Yb(2).$implicit;l.zb(1),l.ec("src",i.info.avatar,l.jc)}}function h(n,t){if(1&n){var e=l.Nb();l.Mb(0,"img",20),l.Ub("error",(function(){l.hc(e);var n=l.Yb(2).$implicit;return l.Yb().errorImage(n.info.id)})),l.Lb()}if(2&n){var i=l.Yb(2).$implicit;l.ec("src",i.info.party.avatar,l.jc)}}function y(n,t){if(1&n&&(l.Mb(0,"ion-row"),l.Mb(1,"ion-col"),l.lc(2,v,2,1,"p",9),l.lc(3,d,2,1,"h1",10),l.Mb(4,"ion-item",11),l.lc(5,m,2,1,"ion-avatar",12),l.Mb(6,"ion-label",13),l.Mb(7,"h1",14),l.Mb(8,"b"),l.mc(9),l.Lb(),l.Lb(),l.Mb(10,"p",14),l.lc(11,h,1,1,"img",15),l.Mb(12,"span",16),l.mc(13),l.Lb(),l.Lb(),l.Lb(),l.Kb(14,"br"),l.Lb(),l.Lb(),l.Lb()),2&n){var e=l.Yb().$implicit,i=l.Yb();l.zb(2),l.ec("ngIf",e.info.polling),l.zb(1),l.ec("ngIf",e.info.polling),l.zb(2),l.ec("ngIf",e.info.avatar),l.zb(4),l.nc(e.info.name[i.trans.currentLang]),l.zb(2),l.ec("ngIf",e.info.party.avatar),l.zb(2),l.nc(e.info.party[i.trans.currentLang])}}function w(n,t){if(1&n&&(l.Mb(0,"div"),l.lc(1,y,15,6,"ion-row",8),l.Lb()),2&n){var e=t.$implicit;l.zb(1),l.ec("ngIf",e.info&&e.info.name&&e.info.party&&e.info.polling&&"10000"!=e.info.polling.id)}}var L,M,C,P=[{path:"",component:(L=function(){function n(t,e,i,r){_classCallCheck(this,n),this.nav=t,this.voting=e,this.util=i,this.trans=r,this.loading=!1,this.votes=[],this.isSUP=!1}return _createClass(n,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,e,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.util.validation(this.nav,!1,!0),e=t.manifest,this.isSUP=this.voting.isSUP(),n.next=4,this.voting.cacheVotesGet();case 4:this.votes=n.sent,this.votes.map((function(n){n.info.polling.type=i.voting.findTypeById(n.info.polling.type,e.polling.types),n.info.avatar="assets/imgs/candidates/"+n.info.id+".jpg",n.info.party.avatar="assets/imgs/parties/"+n.info.party.id+".png"}));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"genQRCode",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.loading=!0,setTimeout((function(){return Object(c.a)(e,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.genQRcode().then((function(n){t=n})).catch((function(n){switch(String(n).slice(7)){case"INVALID_STATION_DEVICE":e.util.notice("errors.invalid","station.station");break;case"NOT_SUPPORT_BALLOT":e.util.notice("errors.vote.support","common.device");break;default:e.util.notice("errors.failed","common.genQR")}})).finally((function(){e.loading=!1,null!=t&&""!==t&&e.nav.navigateRoot("identify",{queryParams:{QRcode:t}})}));case 2:case"end":return n.stop()}}),n,this)})))}),100);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"genQRcode",value:function(){var n=this;return new Promise((function(t,e){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,a,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.isSUP&&!this.voting.cacheVoteSUPGet()&&(i=this.util.validation(this.nav),r=i.device,a=i.manifest,o=this.voting.mapping(s.a.SUP,r,a.polling),this.voting.packVotes([{id:"9999",name:null,party:null,district:null,platform:null}],o.districts[0])),n.next=4,this.voting.genQRcode();case 4:c=n.sent,t(c),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e(n.t0);case 11:case"end":return n.stop()}}),n,this,[[0,8]])})))}))}},{key:"errorImage",value:function(n){this.votes.map((function(t){t.info.id===n&&(t.info.party.avatar=null)}))}},{key:"errorImageProfile",value:function(n){this.votes.map((function(t){t.info.id===n&&(t.info.avatar=null)}))}}]),n}(),L.\u0275fac=function(n){return new(n||L)(l.Jb(a.x),l.Jb(s.b),l.Jb(f.a),l.Jb(b.d))},L.\u0275cmp=l.Db({type:L,selectors:[["app-gen-qrcode"]],decls:14,vars:14,consts:[[3,"title","content"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[4,"ngFor","ngForOf"],[3,"reminder"],[3,"main","loading","mainClick"],[4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["class","sub-title ion-text-wrap",4,"ngIf"],[1,"ballot"],["class","profile",4,"ngIf"],[1,"party"],[1,"ion-text-wrap"],["class","party-avatar",3,"src","error",4,"ngIf"],[1,"verical-middle"],[1,"sub-title","ion-text-wrap"],[1,"profile"],[3,"src","error"],[1,"party-avatar",3,"src","error"]],template:function(n,t){1&n&&(l.Kb(0,"app-header",0),l.Zb(1,"translate"),l.Zb(2,"translate"),l.Mb(3,"ion-content",1),l.Mb(4,"div",2),l.Kb(5,"div",3),l.Lb(),l.Mb(6,"div",4),l.Kb(7,"div",3),l.Lb(),l.Kb(8,"br"),l.lc(9,w,2,1,"div",5),l.Kb(10,"app-reminder",6),l.Zb(11,"translate"),l.Lb(),l.Mb(12,"app-footer",7),l.Ub("mainClick",(function(){return t.genQRCode()})),l.Zb(13,"translate"),l.Lb()),2&n&&(l.ec("title",l.ac(1,6,"genQR.title"))("content",l.ac(2,8,"genQR.content")),l.zb(9),l.ec("ngForOf",t.votes),l.zb(1),l.ec("reminder",l.ac(11,10,"common.reminders.complete")),l.zb(2),l.ec("main",l.ac(13,12,"common.genQR"))("loading",t.loading))},directives:[p.a,a.i,i.i,u.a,g.a,i.j,a.p,a.h,a.m,a.n,a.d],pipes:[b.c],styles:[".ballot[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:58px;height:58px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{margin-left:12px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]   .party-avatar[_ngcontent-%COMP%]{width:28px;height:28px;vertical-align:middle;border-radius:50%}"]}),L)}],R=((M=function n(){_classCallCheck(this,n)}).\u0275mod=l.Hb({type:M}),M.\u0275inj=l.Gb({factory:function(n){return new(n||M)},imports:[[o.i.forChild(P)],o.i]}),M),k=e("j1ZV"),I=((C=function n(){_classCallCheck(this,n)}).\u0275mod=l.Hb({type:C}),C.\u0275inj=l.Gb({factory:function(n){return new(n||C)},imports:[[i.b,r.a,a.u,b.b,k.a,R]]}),C)}}]);