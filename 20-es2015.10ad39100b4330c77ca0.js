(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{WsNE:function(t,n,i){"use strict";i.r(n),i.d(n,"FunctionalConstituencyPageModule",(function(){return w}));var e=i("ofXK"),s=i("3Pt+"),c=i("TEn/"),o=i("tyNb"),a=i("mrSG"),l=i("JnHU"),r=i("fXoL"),u=i("2Rin"),h=i("sYmb"),b=i("LmEr"),d=i("2MiI"),p=i("gstJ"),f=i("gY5R");function g(t,n){1&t&&(r.Kb(0,"app-header",7),r.Zb(1,"translate")),2&t&&r.ec("title",r.ac(1,1,"funct.title1"))}function v(t,n){1&t&&(r.Kb(0,"app-header",7),r.Zb(1,"translate")),2&t&&r.ec("title",r.ac(1,1,"funct.title2"))}function m(t,n){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"app-options",8),r.Ub("ngModelChange",(function(n){return r.hc(t),r.Yb().constituency=n}))("votesChange",(function(){return r.hc(t),r.Yb().voteChange()})),r.Lb(),r.Lb()}if(2&t){const t=r.Yb();r.zb(1),r.ec("options",t.constituencies)("ngModel",t.constituency)("lang",t.trans.currentLang)}}function y(t,n){if(1&t){const t=r.Nb();r.Mb(0,"div"),r.Mb(1,"ion-row"),r.Mb(2,"ion-col",9),r.Mb(3,"h3",10),r.mc(4),r.Lb(),r.Mb(5,"app-vote",11),r.Ub("ngModelChange",(function(n){return r.hc(t),r.Yb().electeds=n})),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=r.Yb();r.zb(4),r.nc(t.constituency[t.trans.currentLang]),r.zb(1),r.ec("candidates",t.candidates)("ngModel",t.electeds)("num",t.num)}}const M=[{path:"",component:(()=>{class t{constructor(t,n,i,e){this.nav=t,this.voting=n,this.util=i,this.trans=e,this.constituencies=[],this.candidates=[],this.electeds=[],this.num=1,this.step=0}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){const{manifest:t}=this.util.validation(this.nav,!1,!0);this.polling=t.polling,this.constituencies=this.voting.findPollingsByType(l.a.FCY,this.polling.districts),0===this.constituencies.length?(this.util.notice("errors.manifest.constituenciesless"),this.util.reset(this.nav)):1===this.constituencies.length&&(this.constituency=this.constituencies[0],this.next())}))}ngAfterViewInit(){this.util.checkVotes(this.nav,1)}next(){this.validate1()&&(this.candidates=this.voting.findCansByDis(this.constituency.id,this.polling.candidates),0===this.candidates.length?(this.util.notice("errors.manifest.candidatesless"),this.util.reset(this.nav)):this.step++)}confirm(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.validate2()){const t=yield this.util.voteConfirm("funct.title2");yield t.present(),t.onDidDismiss().then(t=>{t&&"confirm"===t.role&&(this.voting.packVotes(this.electeds,this.constituency),this.nav.navigateRoot("gen-qrcode"))})}}))}validate1(){return null!=this.constituency}validate2(){return this.electeds.length===this.num}voteChange(){this.content.scrollToTop(500)}}return t.\u0275fac=function(n){return new(n||t)(r.Jb(c.y),r.Jb(l.b),r.Jb(u.a),r.Jb(h.d))},t.\u0275cmp=r.Db({type:t,selectors:[["app-functional-constituency"]],viewQuery:function(t,n){var i;1&t&&r.qc(c.i,!0),2&t&&r.gc(i=r.Vb())&&(n.content=i.first)},decls:12,vars:8,consts:[[3,"title",4,"ngIf"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[4,"ngIf"],[3,"main","mainDisabled","mainClick"],[3,"title"],[3,"options","ngModel","lang","ngModelChange","votesChange"],[1,"content","ion-text-center"],[1,"sub-title","bottom-line"],[3,"candidates","ngModel","num","ngModelChange"]],template:function(t,n){1&t&&(r.lc(0,g,2,3,"app-header",0),r.lc(1,v,2,3,"app-header",0),r.Mb(2,"ion-content",1),r.Mb(3,"div",2),r.Kb(4,"div",3),r.Lb(),r.Mb(5,"div",4),r.Kb(6,"div",3),r.Lb(),r.Kb(7,"br"),r.lc(8,m,2,3,"div",5),r.lc(9,y,6,4,"div",5),r.Lb(),r.Mb(10,"app-footer",6),r.Ub("mainClick",(function(){return 0===n.step?n.next():n.confirm()})),r.Zb(11,"translate"),r.Lb()),2&t&&(r.ec("ngIf",0===n.step),r.zb(1),r.ec("ngIf",1===n.step),r.zb(7),r.ec("ngIf",0===n.step),r.zb(1),r.ec("ngIf",1===n.step),r.zb(1),r.ec("main",r.ac(11,6,0===n.step?"common.next":"common.confirm"))("mainDisabled",0===n.step?null==n.constituency:n.electeds.length!==n.num))},directives:[e.j,c.i,b.a,d.a,p.a,s.c,s.d,c.q,c.h,f.a],pipes:[h.c],styles:[""]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(n){return new(n||t)},imports:[[o.i.forChild(M)],o.i]}),t})();var L=i("j1ZV");let w=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(n){return new(n||t)},imports:[[e.b,s.a,c.v,h.b,L.a,C]]}),t})()}}]);