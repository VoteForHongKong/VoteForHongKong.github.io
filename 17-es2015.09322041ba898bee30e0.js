(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{NlUx:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DeviceDigitsPageModule",(function(){return device_digits_module_DeviceDigitsPageModule}));var common=__webpack_require__("ofXK"),fesm2015_forms=__webpack_require__("3Pt+"),ionic_angular=__webpack_require__("TEn/"),router=__webpack_require__("tyNb"),tslib_es6=__webpack_require__("mrSG"),core=__webpack_require__("fXoL"),voting_service=__webpack_require__("JnHU"),util_service=__webpack_require__("2Rin"),translate_config_service=__webpack_require__("S64H"),header_component=__webpack_require__("2MiI"),code_pins_component=__webpack_require__("qybP"),footer_component=__webpack_require__("LmEr"),ngx_translate_core=__webpack_require__("sYmb");const _c0=function(a0){return{field:a0}};function DeviceDigitsPage_small_16_Template(rf,ctx){if(1&rf&&(core.Mb(0,"small",11),core.mc(1),core.Zb(2,"translate"),core.Zb(3,"translate"),core.Lb()),2&rf){const ctx_r0=core.Yb();core.zb(1),core.nc(core.bc(2,1,"errors."+ctx_r0.codeErrMsg,core.fc(6,_c0,core.ac(3,4,ctx_r0.codeErrField))))}}function DeviceDigitsPage_small_17_Template(rf,ctx){1&rf&&(core.Mb(0,"small",11),core.mc(1," "),core.Lb())}const _c1=function(a0){return{warning:a0}},routes=[{path:"",component:(()=>{class DeviceDigitsPage{constructor(nav,voting,util,trans){this.nav=nav,this.voting=voting,this.util=util,this.trans=trans,this.codeErrMsg="",this.codeErrField="",this.code="    ",this.keyboard=!1}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){}))}ngAfterViewInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.util.checkVotes(this.nav,0),yield this.trans.setLanguage("zh"),yield this.voting.verify();const{manifest:manifest}=this.util.validation(this.nav,!0);this.devices=manifest.devices,window.addEventListener("keyboardWillHide",()=>{this.keyboard=!1}),window.addEventListener("keyboardWillShow",()=>{this.keyboard=!0})}))}confirm(){const{manifest:manifest}=this.util.validation(this.nav,!0),device=manifest.devices.find(st=>String(st.id)===String(this.code));console.log(device),this.validate(device)&&(this.voting.cacheDevice(device),this.nav.navigateForward("station"))}back(){this.nav.pop()}validate(device){return this.codeErrMsg="",this.codeErrField="",this.code.length<4||this.code.includes(" ")?(this.codeErrMsg="complete",this.codeErrField="device-digits.station.code"):device?0===device.privileges.length&&(this.codeErrMsg="invalid",this.codeErrField="device-digits.station.code",this.util.notice("errors.manifest.privilegeless")):(this.codeErrMsg="invalid",this.codeErrField="device-digits.station.code",this.util.notice("errors.exist","station.station")),""===this.codeErrMsg}}return DeviceDigitsPage.ɵfac=function(t){return new(t||DeviceDigitsPage)(core.Jb(ionic_angular.x),core.Jb(voting_service.b),core.Jb(util_service.a),core.Jb(translate_config_service.a))},DeviceDigitsPage.ɵcmp=core.Db({type:DeviceDigitsPage,selectors:[["app-device-digits"]],decls:23,vars:22,consts:[[3,"title"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[1,"block",3,"ngClass"],[1,"ion-text-center"],[1,"ion-no-margin"],[1,"station-pins",3,"isCodeHidden","isNonDigitsCode","codeLength","prefill","codeChanged"],["class","warning-text",4,"ngIf"],[3,"hidden","main","mainClick"],[1,"warning-text"]],template:function(rf,ctx){1&rf&&(core.Kb(0,"app-header",0),core.Zb(1,"translate"),core.Mb(2,"ion-content",1),core.Mb(3,"div",2),core.Kb(4,"div",3),core.Lb(),core.Mb(5,"div",4),core.Kb(6,"div",3),core.Lb(),core.Kb(7,"br"),core.Mb(8,"ion-row",5),core.Mb(9,"ion-col",6),core.Mb(10,"p",7),core.Mb(11,"b"),core.mc(12),core.Zb(13,"translate"),core.Lb(),core.Lb(),core.Kb(14,"br"),core.Mb(15,"app-code-pins",8),core.Ub("codeChanged",(function($event){return ctx.code=$event})),core.Lb(),core.lc(16,DeviceDigitsPage_small_16_Template,4,8,"small",9),core.lc(17,DeviceDigitsPage_small_17_Template,2,0,"small",9),core.Lb(),core.Lb(),core.Mb(18,"p",6),core.mc(19),core.Zb(20,"translate"),core.Lb(),core.Lb(),core.Mb(21,"app-footer",10),core.Ub("mainClick",(function(){return ctx.confirm()})),core.Zb(22,"translate"),core.Lb()),2&rf&&(core.ec("title",core.ac(1,12,"device-digits.title")),core.zb(8),core.ec("ngClass",core.fc(20,_c1,ctx.codeErrMsg)),core.zb(4),core.nc(core.ac(13,14,"device-digits.station.title")),core.zb(3),core.ec("isCodeHidden",!1)("isNonDigitsCode",!1)("codeLength",4)("prefill"," "),core.zb(1),core.ec("ngIf",ctx.codeErrMsg),core.zb(1),core.ec("ngIf",""===ctx.codeErrMsg),core.zb(2),core.nc(core.ac(20,16,"device-digits.content")),core.zb(2),core.ec("hidden",ctx.keyboard)("main",core.ac(22,18,"common.confirm")))},directives:[header_component.a,ionic_angular.i,ionic_angular.p,common.h,ionic_angular.h,code_pins_component.a,common.j,footer_component.a],pipes:[ngx_translate_core.c],styles:[".station-pins[_ngcontent-%COMP%]{--item-spacing:14px;--item-height:2.5em;--item-font-size:20px;--item-background:var(--ion-color-btn-gray);--item-border:none;--item-border-bottom:none;--item-border-has-value:none;--item-border-bottom-has-value:none;--item-border-focused:none;--item-border-bottom-focused:none;--item-shadow-focused:none}"]}),DeviceDigitsPage})()}];let device_digits_routing_module_DeviceDigitsPageRoutingModule=(()=>{class DeviceDigitsPageRoutingModule{}return DeviceDigitsPageRoutingModule.ɵmod=core.Hb({type:DeviceDigitsPageRoutingModule}),DeviceDigitsPageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||DeviceDigitsPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),DeviceDigitsPageRoutingModule})();var components_module=__webpack_require__("j1ZV");let device_digits_module_DeviceDigitsPageModule=(()=>{class DeviceDigitsPageModule{}return DeviceDigitsPageModule.ɵmod=core.Hb({type:DeviceDigitsPageModule}),DeviceDigitsPageModule.ɵinj=core.Gb({factory:function(t){return new(t||DeviceDigitsPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.u,ngx_translate_core.b,components_module.a,device_digits_routing_module_DeviceDigitsPageRoutingModule]]}),DeviceDigitsPageModule})()}}]);