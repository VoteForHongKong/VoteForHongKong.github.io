(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{pRd8:function(t,i,n){"use strict";n.r(i),n.d(i,"GenQRCodePageModule",(function(){return w}));var o=n("ofXK"),e=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),c=n("mrSG"),s=n("JnHU"),l=n("fXoL"),b=n("2Rin"),p=n("sYmb"),f=n("2MiI"),g=n("TYHv"),d=n("LmEr");function m(t,i){if(1&t&&(l.Mb(0,"p",14),l.mc(1),l.Lb()),2&t){const t=l.Yb(2).$implicit,i=l.Yb();l.zb(1),l.nc(t.info.polling.type[i.trans.currentLang])}}function u(t,i){if(1&t&&(l.Mb(0,"h1",17),l.mc(1),l.Lb()),2&t){const t=l.Yb(2).$implicit,i=l.Yb();l.zb(1),l.nc(t.info.polling[i.trans.currentLang])}}function v(t,i){if(1&t){const t=l.Nb();l.Mb(0,"ion-avatar",18),l.Mb(1,"img",19),l.Ub("error",(function(){l.hc(t);const i=l.Yb(2).$implicit;return l.Yb().errorImageProfile(i.info.id)})),l.Lb(),l.Lb()}if(2&t){const t=l.Yb(2).$implicit;l.zb(1),l.ec("src",t.info.avatar,l.jc)}}function h(t,i){if(1&t){const t=l.Nb();l.Mb(0,"img",20),l.Ub("error",(function(){l.hc(t);const i=l.Yb(2).$implicit;return l.Yb().errorImage(i.info.id)})),l.Lb()}if(2&t){const t=l.Yb(2).$implicit;l.ec("src",t.info.party.avatar,l.jc)}}function y(t,i){if(1&t&&(l.Mb(0,"ion-row"),l.Mb(1,"ion-col"),l.lc(2,m,2,1,"p",9),l.lc(3,u,2,1,"h1",10),l.Mb(4,"ion-item",11),l.lc(5,v,2,1,"ion-avatar",12),l.Mb(6,"ion-label",13),l.Mb(7,"h1",14),l.Mb(8,"b"),l.mc(9),l.Lb(),l.Lb(),l.Mb(10,"p",14),l.lc(11,h,1,1,"img",15),l.Mb(12,"span",16),l.mc(13),l.Lb(),l.Lb(),l.Lb(),l.Kb(14,"br"),l.Lb(),l.Lb(),l.Lb()),2&t){const t=l.Yb().$implicit,i=l.Yb();l.zb(2),l.ec("ngIf",t.info.polling),l.zb(1),l.ec("ngIf",t.info.polling),l.zb(2),l.ec("ngIf",t.info.avatar),l.zb(4),l.nc(t.info.name[i.trans.currentLang]),l.zb(2),l.ec("ngIf",t.info.party.avatar),l.zb(2),l.nc(t.info.party[i.trans.currentLang])}}function L(t,i){if(1&t&&(l.Mb(0,"div"),l.lc(1,y,15,6,"ion-row",8),l.Lb()),2&t){const t=i.$implicit;l.zb(1),l.ec("ngIf",t.info&&t.info.name&&t.info.party&&t.info.polling&&"10000"!=t.info.polling.id)}}const M=[{path:"",component:(()=>{class t{constructor(t,i,n,o){this.nav=t,this.voting=i,this.util=n,this.trans=o,this.loading=!1,this.votes=[],this.isSUP=!1}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){const{manifest:t}=this.util.validation(this.nav,!1,!0);this.isSUP=this.voting.isSUP(),this.votes=yield this.voting.cacheVotesGet(),this.votes.map(i=>{i.info.polling.type=this.voting.findTypeById(i.info.polling.type,t.polling.types),i.info.avatar="assets/imgs/candidates/"+i.info.id+".jpg",i.info.party.avatar="assets/imgs/parties/"+i.info.party.id+".png"})}))}genQRCode(){return Object(c.a)(this,void 0,void 0,(function*(){let t;this.loading=!0,setTimeout(()=>Object(c.a)(this,void 0,void 0,(function*(){yield this.genQRcode().then(i=>{t=i}).catch(t=>{switch(String(t).slice(7)){case"INVALID_STATION_DEVICE":this.util.notice("errors.invalid","station.station");break;case"NOT_SUPPORT_BALLOT":this.util.notice("errors.vote.support","common.device");break;default:this.util.notice("errors.failed","common.genQR")}}).finally(()=>{this.loading=!1,null!=t&&""!==t&&this.nav.navigateRoot("identify",{queryParams:{QRcode:t}})})})),100)}))}genQRcode(){return new Promise((t,i)=>Object(c.a)(this,void 0,void 0,(function*(){try{if(this.isSUP&&!this.voting.cacheVoteSUPGet()){const{device:t,manifest:i}=this.util.validation(this.nav),n=this.voting.mapping(s.a.SUP,t,i.polling);this.voting.packVotes([{id:"9999",name:null,party:null,district:null,platform:null}],n.districts[0])}const i=yield this.voting.genQRcode();t(i)}catch(n){i(n)}})))}errorImage(t){this.votes.map(i=>{i.info.id===t&&(i.info.party.avatar=null)})}errorImageProfile(t){this.votes.map(i=>{i.info.id===t&&(i.info.avatar=null)})}}return t.\u0275fac=function(i){return new(i||t)(l.Jb(a.y),l.Jb(s.b),l.Jb(b.a),l.Jb(p.d))},t.\u0275cmp=l.Db({type:t,selectors:[["app-gen-qrcode"]],decls:14,vars:14,consts:[[3,"title","content"],[1,"panel"],[1,"box","left"],[1,"corner"],[1,"box","right"],[4,"ngFor","ngForOf"],[3,"reminder"],[3,"main","loading","mainClick"],[4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["class","sub-title ion-text-wrap",4,"ngIf"],[1,"ballot"],["class","profile",4,"ngIf"],[1,"party"],[1,"ion-text-wrap"],["class","party-avatar",3,"src","error",4,"ngIf"],[1,"verical-middle"],[1,"sub-title","ion-text-wrap"],[1,"profile"],[3,"src","error"],[1,"party-avatar",3,"src","error"]],template:function(t,i){1&t&&(l.Kb(0,"app-header",0),l.Zb(1,"translate"),l.Zb(2,"translate"),l.Mb(3,"ion-content",1),l.Mb(4,"div",2),l.Kb(5,"div",3),l.Lb(),l.Mb(6,"div",4),l.Kb(7,"div",3),l.Lb(),l.Kb(8,"br"),l.lc(9,L,2,1,"div",5),l.Kb(10,"app-reminder",6),l.Zb(11,"translate"),l.Lb(),l.Mb(12,"app-footer",7),l.Ub("mainClick",(function(){return i.genQRCode()})),l.Zb(13,"translate"),l.Lb()),2&t&&(l.ec("title",l.ac(1,6,"genQR.title"))("content",l.ac(2,8,"genQR.content")),l.zb(9),l.ec("ngForOf",i.votes),l.zb(1),l.ec("reminder",l.ac(11,10,"common.reminders.complete")),l.zb(2),l.ec("main",l.ac(13,12,"common.genQR"))("loading",i.loading))},directives:[f.a,a.i,o.i,g.a,d.a,o.j,a.q,a.h,a.n,a.o,a.d],pipes:[p.c],styles:[".ballot[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:58px;height:58px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{margin-left:12px}.ballot[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]   .party-avatar[_ngcontent-%COMP%]{width:28px;height:28px;vertical-align:middle;border-radius:50%}"]}),t})()}];let I=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[r.i.forChild(M)],r.i]}),t})();var P=n("j1ZV");let w=(()=>{class t{}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(i){return new(i||t)},imports:[[o.b,e.a,a.v,p.b,P.a,I]]}),t})()}}]);